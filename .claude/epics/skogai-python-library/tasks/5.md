---
name: Configuration Management and Utils
description: Implement configuration management system and common utilities for the library
status: open
created: 2025-09-08T19:41:12Z
epic: skogai-python-library
---

# Task: Configuration Management and Utils

## Objective

Create a robust configuration management system and common utilities that support the core executable runner while maintaining the minimal dependency philosophy.

## Scope

- Implement `skogai/config.py` for configuration management
- Create `skogai/utils.py` with common utilities
- Add environment variable support and configuration discovery
- Implement utility functions for path resolution and validation

## Technical Requirements

### Core Files to Implement

1. **`skogai/config.py`**
   - Configuration class with sensible defaults
   - Environment variable override support
   - Configuration validation and type checking
   - Executable path discovery and caching

2. **`skogai/utils.py`**
   - Path resolution utilities (absolute path handling)
   - Executable discovery and validation
   - Common string/data manipulation helpers
   - Performance timing utilities

### Configuration Features

- Default timeout values for executable runs
- Default logging levels and formats
- Executable search path configuration
- Environment variable prefix support (`SKOGAI_*`)

### Utility Functions

```python
# Path and executable utilities
def find_executable(name: str, search_paths: List[str] = None) -> Optional[str]
def resolve_path(path: Union[str, Path], base_dir: Optional[str] = None) -> Path
def validate_executable(path: str) -> bool

# Performance and debugging utilities
def time_execution(func: Callable) -> Tuple[Any, float]
def format_duration(seconds: float) -> str

# Configuration utilities
def load_config_from_env() -> Dict[str, Any]
def merge_configs(*configs: Dict[str, Any]) -> Dict[str, Any]
```

### Configuration Schema

```python
@dataclass
class SkogAIConfig:
    default_timeout: int = 30
    log_level: str = "INFO"
    executable_search_paths: List[str] = field(default_factory=list)
    env_prefix: str = "SKOGAI"
    max_output_size: int = 10 * 1024 * 1024  # 10MB
```

## Implementation Details

- Use dataclasses for configuration objects
- Environment variable parsing with type conversion
- Lazy loading of configuration values
- Thread-safe configuration access
- Proper error handling for invalid configuration

## Acceptance Criteria

- [ ] Configuration loads from environment variables properly
- [ ] Default configuration values work without any setup
- [ ] Executable discovery works across common installation paths
- [ ] Path resolution handles relative and absolute paths correctly
- [ ] All utility functions have proper error handling
- [ ] Configuration validation catches common mistakes
- [ ] Thread-safe access to configuration objects
- [ ] Performance utilities provide accurate timing

## Dependencies

- Core library implementation (Task 001)
- Python standard library only (dataclasses, os, pathlib, threading)

## Estimated Effort

2-3 days including comprehensive testing

